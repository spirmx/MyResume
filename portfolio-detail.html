<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio Detail | Sorasak Sonkrai</title>
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <style>
        /* สไตล์สำหรับหน้ารายละเอียด Portfolio */
        .detail-header { background: #0f172a; color: #fff; padding: 100px 0 50px; text-align: center; }
        .detail-header h1 { font-size: 3rem; margin-bottom: 10px; }
        .detail-section { padding: 60px 0; }
        .detail-content { max-width: 800px; margin: 0 auto; line-height: 1.8; }
        .tags span { display: inline-block; background: var(--accent); color: #fff; padding: 4px 10px; border-radius: 5px; margin-right: 8px; font-size: 0.9rem; }
        .cert-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; margin-top: 30px; }
        .cert-card { background: #fff; border: 1px solid var(--line); border-radius: 10px; overflow: hidden; box-shadow: 0 5px 20px rgba(0,0,0,0.05); }
        .cert-card img { height: 200px; object-fit: cover; width: 100%; }
        .cert-info { padding: 15px; }
        .cert-info h4 { margin-top: 0; color: var(--text); }
        .cert-info p { margin: 5px 0 10px; font-size: 0.9rem; color: var(--muted); }
        .cert-link { display: block; text-align: center; background: var(--text); color: #fff; padding: 8px; border-radius: 5px; }
        
        /* สไตล์สำหรับ Iframe Display */
        .project-display {
            width: 100%;
            height: 500px;
            border: 1px solid var(--line);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 30px;
        }
        .project-display iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        @media (max-width: 768px) {
            .detail-header h1 { font-size: 2rem; }
            .project-display { height: 350px; }
        }
    </style>
</head>
<body>
    <header class="navbar" style="position: static;"></header>

    <div id="content-display"></div>

    <footer class="footer">
        <div class="container">© <span id="year"></span> Sorasak Sonkrai</div>
    </footer>
    
    <script src="data.js"></script>
    <script>
        const yearEl = document.getElementById('year');
        if (yearEl) {
          yearEl.textContent = new Date().getFullYear();
        }

        const navbar = document.querySelector(".navbar");
        if (navbar) {
          navbar.innerHTML = `
            <div class="container nav-inner">
                <a href="index.html" class="brand">SPIRMXTH<span style="color:var(--accent)">.DEV</span></a>
                <nav class="links"><a href="index.html#portfolio"><i class="fa-solid fa-chevron-left"></i> Back to Portfolio</a></nav>
            </div>
          `;
        }
        
        function getQueryParams() {
            const params = {};
            new URLSearchParams(window.location.search).forEach((value, key) => { params[key] = value; });
            return params;
        }

        function loadContent() {
            const params = getQueryParams();
            const display = document.getElementById('content-display');

            if (params.project && projects[params.project]) {
                const p = projects[params.project];
                const toolsHtml = p.tools.map(t => `<span>${t}</span>`).join('');
                
                let mediaDisplay;
                if (p.link && p.link !== 'https://spirmx.github.io/MyResume') {
                    mediaDisplay = `<div class="project-display"><iframe src="${p.link}" title="${p.title} Live Demo"></iframe></div>`;
                } else {
                    mediaDisplay = `<img src="${p.img}" alt="${p.title} Mockup" style="width:100%; border-radius:10px; margin-bottom: 30px;">`;
                }

                display.innerHTML = `
                    <section class="detail-header">
                        <div class="container">
                            <h1>${p.title}</h1>
                            <p class="tags">${toolsHtml}</p>
                        </div>
                    </section>
                    <section class="detail-section container">
                        ${mediaDisplay} 
                        <div class="detail-content">
                            <h3>Project Overview</h3>
                            <p>${p.desc}</p>
                            <p>${p.longDesc}</p>
                            <a href="${p.link}" class="btn-primary" target="_blank" style="margin-top:20px; display:inline-block;">Open Live Project <i class="fa-solid fa-arrow-up-right-from-square"></i></a>
                        </div>
                    </section>
                `;
            } else if (params.section === 'cert') {
                const certHtml = certifications.map(c => `
                    <div class="cert-card">
                        <img src="${c.img}" alt="${c.name}">
                        <div class="cert-info">
                            <h4>${c.name}</h4>
                            <p>Issuer: ${c.org} | Date: ${c.date}</p>
                            <a href="${c.verifyLink}" target="_blank" class="cert-link">View Credential <i class="fa-solid fa-arrow-up-right-from-square"></i></a>
                        </div>
                    </div>
                `).join('');
                
                display.innerHTML = `
                    <section class="detail-header">
                        <div class="container">
                            <h1>Certifications & Courses</h1>
                            <p>ใบประกาศนียบัตรที่ได้รับจากการเรียนรู้และฝึกฝน</p>
                        </div>
                    </section>
                    <section class="detail-section container">
                        <div class="cert-grid">
                            ${certHtml}
                        </div>
                    </section>
                `;
            } else {
                display.innerHTML = `
                    <section class="detail-header">
                        <div class="container">
                            <h1>404 Not Found</h1>
                            <p>ไม่พบรายละเอียดที่ต้องการ</p>
                            <a href="index.html#portfolio" class="btn-primary" style="margin-top:20px; display:inline-block;">กลับหน้าหลัก</a>
                        </div>
                    </section>
                `;
            }
        }

        window.addEventListener('load', loadContent);
    </script>
</body>
</html>
